@*
Time To Pay Payment Schedule Display Page

@param schedule The PaymentSchedule to show
@param monthOptions List of number of months available to pay over
*@
@import uk.gov.hmrc.ssttp.models.CalculatorDuration
@import uk.gov.hmrc.ssttp.models.CalculatorPaymentSchedule
@(schedule:CalculatorPaymentSchedule, durationForm:Form[CalculatorDuration], monthOptions:Seq[Int])(implicit request: Request[_])
@import views.html.helpers.message_list
@import views.html.helpers.labelWrap
@import views.html.helpers.forms.form
@import views.html.helpers.forms.button
@import uk.gov.hmrc.ssttp.controllers.routes
@views.html.main(
    title = Messages("ssttp.common.title"),
    bodyClasses = None,
    sidebarLinks = Some(ssttp.sidebar())
){
    <h1 style="heading-h1">@Messages("ssttp.calculator.results.title")</h1>
    <section class="section">
        <h2 style="heading-h2">@Messages("ssttp.calculator.results.heading.what-you-owe")</h2>
        <div class="subsection grid-layout divider--bottom">
            <div class="grid-layout__column grid-layout__column--2-3">@Messages("ssttp.calculator.results.you-owe")</div>
            <div class="grid-layout__column grid-layout__column--1-3">@Messages("ssttp.common.currency.symbol")@schedule.amountToPay</div>
        </div>
        <div class="subsection grid-layout divider--bottom">
            <div class="grid-layout__column grid-layout__column--2-3">@Messages("ssttp.calculator.results.you-can-afford")</div>
            <div class="grid-layout__column grid-layout__column--1-3"><span class="input-currency">
            <input type="number" class="input--small input--no-spinner input--left-padding" value="@schedule.initialPayment" readonly /></span> @Messages("ssttp.calculator.results.you-can-afford-now")</div>
        </div>
        <div class="subsection grid-layout divider--bottom">
            <div class="grid-layout__column grid-layout__column--2-3">@Messages("ssttp.calculator.results.your-instalment-balance")</div>
            <div class="grid-layout__column grid-layout__column--1-3"><strong>@Messages("ssttp.common.currency.symbol")@schedule.instalmentBalance</strong></div>
        </div>
    </section>
    <section class="section">
        <h2 style="heading-h2">@Messages("ssttp.calculator.results.heading.choose-your-instalments")</h2>
        <div class="subsection">
            @form(routes.CalculatorController.durationSubmit()) {
                @labelWrap('labelText -> Messages("ssttp.calculator.results.instalments-over"), 'for -> "months", '_modifierClass -> "form-field form-field--inline"){
                    <input type="number" name="months" id="months_to_show" class="js-toggle-on-value input--xsmall input--left-padding" value="@schedule.instalments.length"
                    min="@monthOptions.min" max="@monthOptions.max" /> @Messages("ssttp.calculator.results.instalments-over.month.plural")
                }
                @button(Messages("ssttp.calculator.results.recalculate-button.label"), '_modifierClass -> "button--spaced button--secondary", 'type -> "submit")
            }
        </div>
    </section>
    <div class="section">
        <h2 style="heading-h2">@Messages("ssttp.calculator.results.heading.your-instalments")</h2>
        @defining(schedule.instalmentBalance) { payment =>
            <div class="subsection grid-layout divider--bottom">
                <div class="grid-layout__column grid-layout__column--2-3">@Messages("ssttp.calculator.results.monthly-payments")
                    <div class="font-xsmall">@Messages("ssttp.calculator.results.monthly-payments.hint")</div>
                </div>
                <div class="grid-layout__column grid-layout__column--1-3"><strong>@Messages("ssttp.common.currency.symbol") @schedule.instalments.head.amount @Messages("ssttp.calculator.results.monthly-payments.per-month")</strong></div>
            </div>
            <div class="subsection grid-layout divider--bottom">
                <div class="grid-layout__column grid-layout__column--2-3">@Messages("ssttp.calculator.results.total-interest")</div>
                <div class="grid-layout__column grid-layout__column--1-3">@Messages("ssttp.common.currency.symbol")@schedule.totalInterestCharged</div>
            </div>
            <div class="subsection grid-layout divider--bottom">
                <div class="grid-layout__column grid-layout__column--2-3">@Messages("ssttp.calculator.results.total-replayment")</div>
                <div class="grid-layout__column grid-layout__column--1-3"><strong>@Messages("ssttp.common.currency.symbol")@schedule.totalPayable</strong></div>
            </div>
        }
        <details>
            <summary>@Messages("ssttp.calculator.results.interest-info.title")</summary>
            <div>
            @message_list(Some("bullets"), "ssttp.calculator.results.interest-info.list.")
            </div>
        </details>
    </div>
    <div class="panel-indent">@Messages("ssttp.calculator.results.interest-info.warning")</div>

    <section class="section">
        <p>@Messages("ssttp.calculator.results.call-us.into")</p>
        <p><strong>@Messages("ssttp.calculator.results.call-us.number")</strong></p>
    </section>
}

