@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.selfservicetimetopay.models.CalculatorPaymentSchedule
@(schedule:CalculatorPaymentSchedule)(implicit messages: play.api.i18n.Messages)
@import java.time.format.DateTimeFormatter
@import java.time.LocalDate
@import selfservicetimetopay.partials.currency
@import java.util.Locale

@defining(DateTimeFormatter.ofPattern("d MMMM yyyy", Locale.ENGLISH)) { formatter =>
@if(schedule.initialPayment > BigDecimal(0)) {
<div class="subsection grid-layout divider--bottom font-xsmall ssttp-spacing-instalment-summary">
    <div class="grid-layout__column grid-layout__column--3-4">
        <div><strong>@LocalDate.now.plusWeeks(1).format(formatter)</strong></div>
        <div>@Messages("ssttp.arrangement.instalment-summary.schedule.initial-payment")</div>
    </div>
    <div class="grid-layout__column grid-layout__column--1-4">@currency(schedule.initialPayment)</div>
</div>
}
@schedule.instalments.map { instalment =>
<div class="subsection grid-layout divider--bottom font-xsmall ssttp-spacing-instalment-summary">
    <p>
        <div class="grid-layout__column grid-layout__column--3-4">
            <div><strong>@instalment.paymentDate.format(formatter)</strong></div>
            @if(instalment == schedule.instalments.last) {
            <div>@Messages("ssttp.arrangement.instalment-summary.schedule.final-payment",
                currency(schedule.totalInterestCharged))
            </div>
            }
        </div>
    </p>
    <p>
        <div class="grid-layout__column grid-layout__column--1-4">@currency(instalment.amount)</div>
    </p>
</div>
}
}
