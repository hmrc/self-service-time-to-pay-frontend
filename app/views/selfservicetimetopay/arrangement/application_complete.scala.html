@*
  Time To Pay Application Complete page

  @param debits Seq[Debit] Debit list from users tax account
  @param directDebit: ApplicationDirectDebit the direct debit details user used for payment plan
  @param schedule PaymentSchedule The results data to display

*@
@import uk.gov.hmrc.selfservicetimetopay.models.{Debit, CalculatorPaymentSchedule, ArrangementDirectDebit}
@(debits:Seq[Debit], directDebit:ArrangementDirectDebit, schedule:CalculatorPaymentSchedule)(implicit request: Request[_])
@import selfservicetimetopay.helpers.message_list
@import selfservicetimetopay.partials.{what_you_owe, direct_debit_details, payment_schedule}
@import selfservicetimetopay.partials.currency
@printCssLink = {
  <link rel='stylesheet' href='@routes.Assets.at("css/self-service-time-to-pay.css")' />
}
@selfservicetimetopay.main(
  title = Messages("ssttp.common.title"),
  linksElem = Some(printCssLink),
  sidebarLinks = Some(selfservicetimetopay.partials.help_and_advice_sidebar())
){
  <div class="transaction-banner--complete">
    <div class="transaction-banner__heading" role="banner">@Messages("ssttp.arrangement.complete.title")</div>
    <p class="heading-large" id="ssttpOutcome">@Messages("ssttp.arrangement.complete.subtitle")</p>
  </div>
  <a href="javascript:window.print()" class="js-visible no-print float--right gutter-left print-link js-visible">@Messages("ssttp.arrangement.instalment-summary.print")</a>
  <section class="section divider--bottom">
    <h2>@Messages("ssttp.arrangement.complete.next")</h2>
    <p>@message_list(Some("bullets"), "ssttp.arrangement.complete.next.list.")</p>
    <p>@Messages("ssttp.arrangement.complete.one-off-service")</p>
  </section>
  <section class="section">
    <h3>@Messages("ssttp.arrangement.complete.what-you-owe")</h3>
    @what_you_owe(debits)
    <div class="subsection grid-layout divider--bottom font-xsmall">
      <div class="grid-layout__column grid-layout__column--3-4">
        <p>@Messages("ssttp.arrangement.complete.payment-plan", schedule.instalments.length)</p>
        <p><span class="font-xsmall">@Messages("ssttp.arrangement.complete.interest-rate", 2.75)</span></p>
      </div>
      <div class="grid-layout__column grid-layout__column--1-4 align--middle"><p>@currency(schedule.totalInterestCharged)</p></div>
    </div>
    <div class="subsection grid-layout divider--bottom font-xsmall">
      <div class="grid-layout__column grid-layout__column--3-4"><p><strong>@Messages("ssttp.arrangement.complete.total")</strong></p></div>
      <div class="grid-layout__column grid-layout__column--1-4 align--middle"><p><strong>@currency(schedule.totalPayable)</strong></p></div>
    </div>
    <span class="no-print">@direct_debit_details(directDebit)</span>
    <span class="print-only">@direct_debit_details(directDebit, true)</span>
    @payment_schedule(schedule)
  </section>

  <p>&nbsp;</p>
  <p class="divider--top">
    <a href="javascript:window.print()" class="js-visible no-print float--right gutter-left print-link print-hidden js-visible">@Messages("ssttp.arrangement.instalment-summary.print")</a>
  </p>

}

