@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@(field: Field, optionsList: Seq[(String, String)], args:(Symbol, Any)*)(content: Html)(implicit messages: play.api.i18n.Messages, lang: Lang = Lang("en"))
@import views.html.helper.FieldElements
@import selfservicetimetopay.helpers.labelWrap
@import selfservicetimetopay.helpers.forms.fieldErrors
@elements = @{ new FieldElements(field.id, field, null, args.toMap, messages) }
@fieldValue = @{ field.value match { case Some(x) => x case None => "" case x => x }}
@fieldSetClass = @{
  var c = elements.args.getOrElse('_modifierClass, "").asInstanceOf[String].trim
  if (field.hasErrors) {
    c += " form-field-group--error"
  }
  c.trim
}
@defining({
  var classes = elements.args.getOrElse('_inputClass, "").toString
  if (field.hasErrors) {
    classes += " error-field"
  }
  classes
}) { inputClass =>
    <a name="@elements.field.name"></a>
    <fieldset @if(!fieldSetClass.isEmpty){ class="@fieldSetClass"}>
        @content
        <div class="form-field@if(elements.args.get('_modifierClass)){@elements.args.get('_modifierClass)} ">
          @fieldErrors(field)
          @optionsList.map { case (value, label) =>
            @defining(s"${elements.field.name}-${value.toLowerCase.replace(" ","_")}") { inputId =>
              @labelWrap('labelText -> label, '_modifierClass -> elements.args.get('_labelClass), 'for -> inputId){
                <input type="radio" id="@inputId" @if(!inputClass.isEmpty){class="@inputClass"}
                  name="@elements.field.name" value="@value"@if(fieldValue==value){ checked="checked"}/>
                }
            }
          }
        </div>
    </fieldset>
}

