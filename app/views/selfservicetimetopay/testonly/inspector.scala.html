@import uk.gov.hmrc.selfservicetimetopay.controllers.routes
@import uk.gov.hmrc.selfservicetimetopay.testonly.{routes => testonlyroutes}

@(
        playSession: Map[String, String],
        cache: List[(String, String)],
        authority: String,
        hcHeaders: Seq[(String, String)]
)(implicit messages: play.api.i18n.Messages, request: Request[_])

<script>
</script>
@selfservicetimetopay.main(
    title = "User's related and session data"
) {

    <header>
        <h1>Inspector</h1>
        <p>This is `test-only` endpoint for debug purposes.</p>
    </header>

    <p>
        <h2>Quick links</h2>
        <ul>
            <li><a class="link" href="@testonlyroutes.InspectorController.clearPlaySession()">clear play session</a></li>
            <li><a class="link" href="@testonlyroutes.TestUsersController.testUsers()">create user and log in</a></li>
            <li><a class="link" href="@testonlyroutes.TestOnlyController.config()">show config of 'frontend' microservice</a></li>
            <li><a class="link" href="@testonlyroutes.TestOnlyController.getTaxpayer()">show taxpayer</a></li>
            <li><a class="link" href="@testonlyroutes.TestOnlyController.taxpayerConfig()">show config of 'taxpayer' microservice</a></li>
            <li><a class="link" href="@testonlyroutes.TestOnlyController.taxpayerConnectorsConfig()">show connectors config of 'taxpayer' microservice</a></li>
        </ul>
    </p>

    <p>
        <h2>Pages</h2>
        <ul>

            <li><a class="link" href="@routes.SelfServiceTimeToPayController.start()">@{routes.SelfServiceTimeToPayController.start().path()}</a></li>
            <li><a class="link" href="@routes.EligibilityController.start()">@{routes.EligibilityController.start().path()}</a></li>
            <li><a class="link" href="@routes.EligibilityController.getTypeOfTax()">@{routes.EligibilityController.getTypeOfTax().path()}</a></li>
            <li><a class="link" href="@routes.EligibilityController.getExistingTtp()">@{routes.EligibilityController.getExistingTtp().path()}</a></li>
            <li><a class="link" href="@routes.EligibilityController.getSignInQuestion()">@{routes.EligibilityController.getSignInQuestion().path()}</a></li>

            <li><a class="link" href="@routes.CalculatorController.getWhatYouOweReview()">@{routes.CalculatorController.getWhatYouOweReview().path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.getDebitDate()">@{routes.CalculatorController.getDebitDate().path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.getAmountOwed()">@{routes.CalculatorController.getAmountOwed().path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.getPayTodayQuestion()">@{routes.CalculatorController.getPayTodayQuestion().path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.getPaymentToday()">@{routes.CalculatorController.getPaymentToday().path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.getCalculateInstalments(None)">@{routes.CalculatorController.getCalculateInstalments(None).path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.getCalculateInstalmentsPrint()">@{routes.CalculatorController.getCalculateInstalmentsPrint().path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.getTaxLiabilities()">@{routes.CalculatorController.getTaxLiabilities().path()}</a></li>
            <li><a class="link" href="@routes.ArrangementController.determineMisalignment()>@{routes.ArrangementController.determineMisalignment().path()}</a></li>

            <li><a class="link" href="@routes.CalculatorController.getMisalignmentPage()">@{routes.CalculatorController.getMisalignmentPage().path()}</a></li>
            <li><a class="link" href="@routes.CalculatorController.submitRecalculate()">@{routes.CalculatorController.submitRecalculate().path()}</a></li>

            <li><a class="link" href="@routes.ArrangementController.getInstalmentSummary()">@{routes.ArrangementController.getInstalmentSummary().path()}</a></li>
            <li><a class="link" href="@routes.DirectDebitController.getDirectDebit()">@{routes.DirectDebitController.getDirectDebit().path()}</a></li>
            <li><a class="link" href="@routes.DirectDebitController.getDirectDebitConfirmation()">@{routes.DirectDebitController.getDirectDebitConfirmation().path()}</a></li>
            <li><a class="link" href="@routes.DirectDebitController.getDirectDebitAssistance()">@{routes.DirectDebitController.getDirectDebitAssistance().path()}</a></li>
            <li><a class="link" href="@routes.DirectDebitController.getDirectDebitError()">@{routes.DirectDebitController.getDirectDebitError().path()}</a></li>
            <li><a class="link" href="@routes.ArrangementController.applicationComplete()">@{routes.ArrangementController.applicationComplete().path()}</a></li>

            <li><a class="link" href="@routes.SelfServiceTimeToPayController.signout(None)">@{routes.SelfServiceTimeToPayController.signout(None).path()}</a></li>
            <li><a class="link" href="@routes.SelfServiceTimeToPayController.getYouNeedToFile()">@{routes.SelfServiceTimeToPayController.getYouNeedToFile().path()}</a></li>
            <li><a class="link" href="@routes.SelfServiceTimeToPayController.getTtpCallUs()">@{routes.SelfServiceTimeToPayController.getTtpCallUs().path()}</a></li>
            <li><a class="link" href="@routes.SelfServiceTimeToPayController.getUnavailable()">@{routes.SelfServiceTimeToPayController.getUnavailable().path()}</a></li>
        </ul>
    </p>

    <p>
        <h2>Cache from Key Store</h2>
        <table>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>

            @cache.map { item =>
                <tr>
                    <td style="vertical-align: top">@item._1</td>
                    <td style="word-break: break-all">
                        <pre style="border: none">@item._2</pre>
                    </td>
                </tr>
            }
        </table>
    </p>

    <p>
        <h2>Authority</h2>
        <pre style="border: none; font-size: 15px">@{authority}</pre>
    </p>


    <p>
        <h2>Play Session (decoded `mdtp` cookie) </h2>
        <table>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>

            @playSession.map { item =>
                <tr>
                    <td style="vertical-align: top">@item._1</td>
                    <td style="word-break: break-all">
                        <code style="border: none">@item._2</code>
                    </td>
                </tr>
            }
        </table>
    </p>


    <p>
        <h2>Cookies</h2>
        <table>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>

            @request.cookies.toList.map { item =>
                <tr>
                    <td style="vertical-align: top">@{
                        item.name
                    }</td>
                    <td style="word-break: break-all">
                        <code style="border: none">@{
                            item.value
                        }</code>
                    </td>
                </tr>
            }
        </table>
    </p>

    <p>
        <h2>Header Carrier content</h2>
        <table>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>

            @hcHeaders.map { item =>
                <tr>
                    <td style="vertical-align: top">@item._1</td>
                    <td style="word-break: break-all">
                        <pre style="border: none">@item._2</pre>
                    </td>
                </tr>
            }
        </table>
    </p>
}

